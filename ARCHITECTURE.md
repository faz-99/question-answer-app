# ğŸ—ï¸ System Architecture Documentation

## High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USER INTERFACE                           â”‚
â”‚                      (PyQt5 Desktop App)                        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Document Management â”‚    â”‚  Question & Answer   â”‚         â”‚
â”‚  â”‚       Tab            â”‚    â”‚        Tab           â”‚         â”‚
â”‚  â”‚                      â”‚    â”‚                      â”‚         â”‚
â”‚  â”‚  â€¢ Load Documents    â”‚    â”‚  â€¢ Enter Question    â”‚         â”‚
â”‚  â”‚  â€¢ Clear Database    â”‚    â”‚  â€¢ View Answer       â”‚         â”‚
â”‚  â”‚  â€¢ View Status       â”‚    â”‚  â€¢ See Sources       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                          â”‚
              â”‚ (Threading)              â”‚ (Threading)
              â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DOCUMENT PROCESSING   â”‚    â”‚    QUESTION ANSWERING        â”‚
â”‚    (embed_store.py)     â”‚    â”‚      (qa_engine.py)          â”‚
â”‚                         â”‚    â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ File Readers     â”‚   â”‚    â”‚  â”‚ Question Processor     â”‚ â”‚
â”‚  â”‚ â€¢ PDF Parser     â”‚   â”‚    â”‚  â”‚ â€¢ Embedding Generator  â”‚ â”‚
â”‚  â”‚ â€¢ DOCX Parser    â”‚   â”‚    â”‚  â”‚ â€¢ Context Retriever    â”‚ â”‚
â”‚  â”‚ â€¢ TXT Parser     â”‚   â”‚    â”‚  â”‚ â€¢ Answer Generator     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚             â”‚    â”‚              â”‚              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Text Chunker     â”‚   â”‚    â”‚  â”‚ GPT4All LLM            â”‚ â”‚
â”‚  â”‚ â€¢ Split text     â”‚   â”‚    â”‚  â”‚ â€¢ Local inference      â”‚ â”‚
â”‚  â”‚ â€¢ Add overlap    â”‚   â”‚    â”‚  â”‚ â€¢ Context-restricted   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚  â”‚ â€¢ Temperature: 0.1     â”‚ â”‚
â”‚           â”‚             â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚                              â”‚
â”‚  â”‚ Embedding Gen.   â”‚   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â”‚ â€¢ SentenceTrans. â”‚   â”‚                 â”‚
â”‚  â”‚ â€¢ 384-dim vector â”‚   â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
            â”‚                               â”‚
            â”‚ Store                         â”‚ Query
            â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VECTOR DATABASE                          â”‚
â”‚                   (ChromaDB - Local)                        â”‚
â”‚                                                             â”‚
â”‚  Collection: "exam_documents"                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Document Chunks (Text)                             â”‚   â”‚
â”‚  â”‚  Embeddings (384-dim vectors)                       â”‚   â”‚
â”‚  â”‚  Metadata (source filename)                         â”‚   â”‚
â”‚  â”‚  Index: HNSW (Cosine Similarity)                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Interaction Flow

### 1. Document Loading Flow

```
User Action: Click "Load Documents"
    â”‚
    â–¼
[app.py] File Dialog Opens
    â”‚
    â–¼
User Selects Files (PDF/DOCX/TXT)
    â”‚
    â–¼
[app.py] DocumentLoadThread Started
    â”‚
    â–¼
[embed_store.py] load_documents() Called
    â”‚
    â”œâ”€â–º For Each File:
    â”‚   â”‚
    â”‚   â”œâ”€â–º extract_text()
    â”‚   â”‚   â”œâ”€â–º PDF: pdfplumber.open()
    â”‚   â”‚   â”œâ”€â–º DOCX: Document()
    â”‚   â”‚   â””â”€â–º TXT: open()
    â”‚   â”‚
    â”‚   â”œâ”€â–º chunk_text()
    â”‚   â”‚   â”œâ”€â–º Split into 500-char chunks
    â”‚   â”‚   â””â”€â–º Add 50-char overlap
    â”‚   â”‚
    â”‚   â”œâ”€â–º SentenceTransformer.encode()
    â”‚   â”‚   â””â”€â–º Generate 384-dim embeddings
    â”‚   â”‚
    â”‚   â””â”€â–º ChromaDB.collection.add()
    â”‚       â”œâ”€â–º Store embeddings
    â”‚       â”œâ”€â–º Store text chunks
    â”‚       â””â”€â–º Store metadata
    â”‚
    â–¼
[app.py] Update GUI with Results
    â”‚
    â–¼
User Sees: "âœ… Loading Complete! Processed Files: X, Total Chunks: Y"
```

### 2. Question Answering Flow

```
User Action: Enter Question + Click "Get Answer"
    â”‚
    â–¼
[app.py] QAThread Started
    â”‚
    â–¼
[qa_engine.py] answer_question() Called
    â”‚
    â”œâ”€â–º retrieve_context()
    â”‚   â”‚
    â”‚   â”œâ”€â–º SentenceTransformer.encode(question)
    â”‚   â”‚   â””â”€â–º Generate question embedding
    â”‚   â”‚
    â”‚   â”œâ”€â–º ChromaDB.collection.query()
    â”‚   â”‚   â”œâ”€â–º Compare with stored embeddings
    â”‚   â”‚   â”œâ”€â–º Calculate cosine similarity
    â”‚   â”‚   â””â”€â–º Return top-k matches (default: 3)
    â”‚   â”‚
    â”‚   â””â”€â–º Return: [context1, context2, context3]
    â”‚
    â”œâ”€â–º generate_answer()
    â”‚   â”‚
    â”‚   â”œâ”€â–º Build Prompt:
    â”‚   â”‚   "You are an exam assistant. Answer using ONLY the context below.
    â”‚   â”‚    If answer not found, say: 'Answer not found in the provided
    â”‚   â”‚    exam materials.'
    â”‚   â”‚    
    â”‚   â”‚    Context: [retrieved chunks]
    â”‚   â”‚    Question: [user question]
    â”‚   â”‚    Answer:"
    â”‚   â”‚
    â”‚   â”œâ”€â–º GPT4All.generate()
    â”‚   â”‚   â”œâ”€â–º Load model (if not loaded)
    â”‚   â”‚   â”œâ”€â–º Process prompt
    â”‚   â”‚   â”œâ”€â–º Generate tokens (max: 300)
    â”‚   â”‚   â””â”€â–º Return answer
    â”‚   â”‚
    â”‚   â””â”€â–º Validate Answer
    â”‚       â”œâ”€â–º Check length > 10 chars
    â”‚       â””â”€â–º Return answer or "Answer not found"
    â”‚
    â””â”€â–º Return: {answer, contexts, sources}
    â”‚
    â–¼
[app.py] Display Results in GUI
    â”‚
    â–¼
User Sees: Answer + Sources
```

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PDF    â”‚â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DOCX   â”‚â”€â”€â”¼â”€â”€â”€â–ºâ”‚ Text Extractâ”‚â”€â”€â”€â–ºâ”‚ Text Chunker â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                              â”‚
â”‚   TXT    â”‚â”€â”€â”˜                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
                                             â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ Sentence        â”‚
                                    â”‚ Transformer     â”‚
                                    â”‚ (Embedding)     â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   ChromaDB      â”‚
                                    â”‚   Storage       â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â”‚ Query
                                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚ Question â”‚â”€â”€â”                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                              â”‚
              â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
              â””â”€â”€â”€â–ºâ”‚ Sentence    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ Transformer â”‚
                   â”‚ (Embedding) â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ Retrieve Top-K
                          â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  Context    â”‚
                   â”‚  Chunks     â”‚
                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  GPT4All    â”‚
                   â”‚  Generate   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚   Answer    â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Class Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         app.py                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ExamQAApp (QMainWindow)                                    â”‚
â”‚  â”œâ”€ doc_store: DocumentStore                                â”‚
â”‚  â”œâ”€ qa_engine: QAEngine                                     â”‚
â”‚  â”œâ”€ init_ui()                                               â”‚
â”‚  â”œâ”€ load_documents()                                        â”‚
â”‚  â”œâ”€ ask_question()                                          â”‚
â”‚  â””â”€ clear_database()                                        â”‚
â”‚                                                             â”‚
â”‚  DocumentLoadThread (QThread)                               â”‚
â”‚  â”œâ”€ doc_store: DocumentStore                                â”‚
â”‚  â”œâ”€ file_paths: List[str]                                   â”‚
â”‚  â””â”€ run()                                                   â”‚
â”‚                                                             â”‚
â”‚  QAThread (QThread)                                         â”‚
â”‚  â”œâ”€ qa_engine: QAEngine                                     â”‚
â”‚  â”œâ”€ question: str                                           â”‚
â”‚  â””â”€ run()                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     embed_store.py                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  DocumentStore                                              â”‚
â”‚  â”œâ”€ db_path: str                                            â”‚
â”‚  â”œâ”€ embedding_model: SentenceTransformer                    â”‚
â”‚  â”œâ”€ client: chromadb.Client                                 â”‚
â”‚  â”œâ”€ collection: chromadb.Collection                         â”‚
â”‚  â”œâ”€ extract_text(file_path) â†’ str                           â”‚
â”‚  â”œâ”€ extract_text_from_pdf(file_path) â†’ str                  â”‚
â”‚  â”œâ”€ extract_text_from_docx(file_path) â†’ str                 â”‚
â”‚  â”œâ”€ extract_text_from_txt(file_path) â†’ str                  â”‚
â”‚  â”œâ”€ chunk_text(text, chunk_size, overlap) â†’ List[str]       â”‚
â”‚  â”œâ”€ load_documents(file_paths) â†’ Dict                       â”‚
â”‚  â”œâ”€ clear_database()                                        â”‚
â”‚  â””â”€ get_collection_count() â†’ int                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      qa_engine.py                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  QAEngine                                                   â”‚
â”‚  â”œâ”€ db_path: str                                            â”‚
â”‚  â”œâ”€ embedding_model: SentenceTransformer                    â”‚
â”‚  â”œâ”€ client: chromadb.Client                                 â”‚
â”‚  â”œâ”€ collection: chromadb.Collection                         â”‚
â”‚  â”œâ”€ llm: GPT4All                                            â”‚
â”‚  â”œâ”€ _load_llm()                                             â”‚
â”‚  â”œâ”€ retrieve_context(question, top_k) â†’ List[Dict]          â”‚
â”‚  â”œâ”€ generate_answer(question, contexts) â†’ str               â”‚
â”‚  â””â”€ answer_question(question, top_k) â†’ Dict                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Sequence Diagram - Complete Q&A Flow

```
User          GUI           QAThread      QAEngine      ChromaDB      GPT4All
 â”‚             â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚ Enter Q     â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚               â”‚             â”‚             â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚ Click "Get  â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚  Answer"    â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚               â”‚             â”‚             â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚             â”‚ Start Thread  â”‚             â”‚             â”‚            â”‚
 â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚             â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚             â”‚               â”‚ answer_     â”‚             â”‚            â”‚
 â”‚             â”‚               â”‚ question()  â”‚             â”‚            â”‚
 â”‚             â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚ retrieve_   â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚ context()   â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚
 â”‚             â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚ Embed Q     â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚
 â”‚             â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚ Query       â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚
 â”‚             â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚ Top-K       â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚ Contexts    â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚ generate_   â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚ answer()    â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚             â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚             â”‚ Process    â”‚
 â”‚             â”‚               â”‚             â”‚             â”‚ Prompt     â”‚
 â”‚             â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚             â”‚ Generate   â”‚
 â”‚             â”‚               â”‚             â”‚             â”‚ Tokens     â”‚
 â”‚             â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚ Answer      â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚             â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚             â”‚               â”‚ Result      â”‚             â”‚            â”‚
 â”‚             â”‚               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚             â”‚ Finished      â”‚             â”‚             â”‚            â”‚
 â”‚             â”‚ Signal        â”‚             â”‚             â”‚            â”‚
 â”‚             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚             â”‚            â”‚
 â”‚             â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚ Display     â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚ Answer      â”‚               â”‚             â”‚             â”‚            â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚             â”‚             â”‚            â”‚
```

## State Diagram - Application States

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Initial   â”‚
â”‚   State     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ App Starts
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Engines    â”‚
â”‚ Initialized â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ User Action
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Ready State                    â”‚
â”‚  â€¢ Can load documents                   â”‚
â”‚  â€¢ Can clear database                   â”‚
â”‚  â€¢ Cannot ask questions (if DB empty)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Load Documents
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Loading    â”‚
â”‚ Documents   â”‚
â”‚  (Busy)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Loading Complete
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Documents Loaded State             â”‚
â”‚  â€¢ Can load more documents              â”‚
â”‚  â€¢ Can clear database                   â”‚
â”‚  â€¢ Can ask questions                    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Ask Question
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Processing  â”‚
â”‚  Question   â”‚
â”‚   (Busy)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Answer Ready
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Answer Displayed State             â”‚
â”‚  â€¢ Can ask another question             â”‚
â”‚  â€¢ Can load more documents              â”‚
â”‚  â€¢ Can clear database                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Clear Database
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Database   â”‚
â”‚   Cleared   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Return to Ready
       â–¼
   (Back to Ready State)
```

## Technology Stack Details

### Frontend Layer
```
PyQt5 5.15.10
â”œâ”€ QtWidgets (UI components)
â”œâ”€ QtCore (Threading, signals)
â””â”€ QtGui (Fonts, styling)
```

### Processing Layer
```
Document Processing
â”œâ”€ pdfplumber 0.10.3 (PDF extraction)
â”œâ”€ python-docx 1.1.0 (DOCX extraction)
â””â”€ Built-in open() (TXT extraction)

Embedding Generation
â””â”€ sentence-transformers 2.2.2
    â”œâ”€ Model: all-MiniLM-L6-v2
    â”œâ”€ Output: 384-dimensional vectors
    â””â”€ Backend: PyTorch 2.1.2
```

### Storage Layer
```
ChromaDB 0.4.22
â”œâ”€ Persistence: Local directory
â”œâ”€ Index: HNSW
â”œâ”€ Similarity: Cosine
â””â”€ Collections: exam_documents
```

### Inference Layer
```
GPT4All 2.0.2
â”œâ”€ Model: ggml-gpt4all-j-v1.3-groovy.bin
â”œâ”€ Size: 3.5 GB
â”œâ”€ Type: Quantized transformer
â””â”€ Inference: CPU-based
```

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Application Boundary                   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚         No Network Access                     â”‚     â”‚
â”‚  â”‚  â€¢ No import requests                         â”‚     â”‚
â”‚  â”‚  â€¢ No import urllib                           â”‚     â”‚
â”‚  â”‚  â€¢ No API endpoints                           â”‚     â”‚
â”‚  â”‚  â€¢ No external connections                    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ï¿½ï¿½â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚         Local Processing Only                 â”‚     â”‚
â”‚  â”‚  â€¢ All models stored locally                  â”‚     â”‚
â”‚  â”‚  â€¢ ChromaDB in local mode                     â”‚     â”‚
â”‚  â”‚  â€¢ No cloud services                          â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚         Context Restriction                   â”‚     â”‚
â”‚  â”‚  â€¢ LLM receives only retrieved context        â”‚     â”‚
â”‚  â”‚  â€¢ Strict prompt engineering                  â”‚     â”‚
â”‚  â”‚  â€¢ Low temperature (0.1)                      â”‚     â”‚
â”‚  â”‚  â€¢ "Answer not found" fallback                â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Performance Optimization Points

```
Document Loading
â”œâ”€ Batch embedding generation âœ“
â”œâ”€ Efficient text chunking âœ“
â”œâ”€ Parallel file processing âœ— (future enhancement)
â””â”€ Caching extracted text âœ— (future enhancement)

Question Answering
â”œâ”€ Embedding model caching âœ“ (automatic)
â”œâ”€ ChromaDB indexing âœ“ (HNSW)
â”œâ”€ LLM model persistence âœ“
â””â”€ Result caching âœ— (future enhancement)

UI Responsiveness
â”œâ”€ Threading for long operations âœ“
â”œâ”€ Progress indicators âœ“
â”œâ”€ Non-blocking UI âœ“
â””â”€ Async operations âœ— (using threads instead)
```

## Deployment Architecture

```
Development Machine          Production Machine (Offline)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  â”‚        â”‚                          â”‚
â”‚ â€¢ Install deps   â”‚        â”‚ â€¢ Copy application       â”‚
â”‚ â€¢ Download model â”‚â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ Copy model file        â”‚
â”‚ â€¢ Test system    â”‚        â”‚ â€¢ Load exam documents    â”‚
â”‚                  â”‚        â”‚ â€¢ Disconnect internet    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â€¢ Run application        â”‚
                            â”‚                          â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

This architecture ensures complete offline operation while maintaining high performance and academic integrity.
